body {
  margin:0;
  font-family: Arial, sans-serif;
  background:#f4f6fb;
}

.header {
  padding:15px;
  background:white;
  border-bottom:1px solid #ddd;
}

.title {
  font-weight:900;
  text-align:center;
  margin-bottom:10px;
}

.hud {
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
}

.centerControls {
  text-align:center;
}

button {
  padding:8px 14px;
  margin:4px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

.start { background:#16a34a; color:white; }
.reset { background:#ef4444; color:white; }

.grid {
  display:grid;
  grid-template-columns:1fr 1.2fr 1fr;
  gap:20px;
  padding:20px;
}

.panel {
  background:white;
  padding:15px;
  border-radius:12px;
}

.keypadWrap {
  max-width:260px;
}

.keypad {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:5px;
}

.keypad button {
  padding:12px;
  font-size:18px;
}

.arena {
  --ropeY:84px;
  --playerSize:120px;
  --teamGap:40px;
  --gameX:0px;
  --handAdjustY:4px;
  text-align:center;
  position:relative;
  background:#ffffff;
  border:2px solid #dbeafe;
  border-radius:18px;
  padding:16px 20px 20px;
  box-shadow:0 10px 24px rgba(30, 64, 175, 0.12);
}

.topInfo {
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  font-weight:700;
  color:#1f2937;
}

.timer {
  font-size:18px;
}

.centerLine {
  position:absolute;
  top:58px;
  bottom:24px;
  left:50%;
  width:0;
  border-left:5px dashed #94a3b8;
  transform:translateX(-50%);
  opacity:0.9;
}

.ropeLine {
  position:absolute;
  left:50%;
  top:78px;
  transform:translateX(calc(-50% + var(--gameX, 0px)));
  width:760px;
  height:8px;
  background:#0d1520;
  border-radius:6px;
  transition:transform 0.25s ease;
  z-index:5;
}

.knot {
  position:absolute;
  width:0;
  height:0;
  border-left:10px solid transparent;
  border-right:10px solid transparent;
  border-top:18px solid #ef4444;
  top:78px;
  left:50%;
  transform:translate(calc(-50% + var(--gameX, 0px)),-20%);
  transition:transform 0.25s ease;
  z-index:3;
}

.tugScene {
  position:relative;
  height:220px;
  margin:20px 0;
  overflow:visible;
  border-radius:12px;
  padding:0;
}

.tugStage {
  position:relative;
  width:100%;
  height:220px;
  margin-top:40px;
  --gameX:0px;
  pointer-events:none;
  z-index:10;
}

.midPullers {
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:220px;
  pointer-events:none;
  z-index:2;
  transition:transform 0.22s ease;
}

.midPullers[data-pull="left"] {
  transform:translateX(-10px);
}

.midPullers[data-pull="right"] {
  transform:translateX(10px);
}

.midPerson {
  position:relative;
  width:50px;
  height:96px;
  transform:translateY(22px);
  filter:drop-shadow(0 2px 2px rgba(0,0,0,0.25));
}

.midPerson::before {
  content:"";
  position:absolute;
  width:24px;
  height:10px;
  border-radius:999px;
  border:2px solid #111827;
  background:#bfdbfe;
  top:-6px;
  left:50%;
  transform:translateX(-50%);
}

.midPerson .head {
  position:absolute;
  top:0;
  left:50%;
  width:17px;
  height:17px;
  transform:translateX(-50%);
  border-radius:50%;
  background:#f8e8d0;
  border:2px solid #171717;
}

.midPerson .body {
  position:absolute;
  top:18px;
  left:50%;
  width:27px;
  height:36px;
  transform:translateX(-50%);
  border-radius:9px;
  border:2px solid #171717;
  background:currentColor;
}

.midPerson .arm,
.midPerson .leg {
  position:absolute;
  display:block;
  background:#171717;
  border-radius:999px;
  transform-origin:top center;
}

.midPerson .arm {
  top:28px;
  width:4px;
  height:28px;
}

.midPerson .armBack {
  left:7px;
}

.midPerson .armFront {
  right:7px;
}

.midPerson .leg {
  top:54px;
  width:7px;
  height:36px;
}

.midPerson .legBack {
  left:13px;
}

.midPerson .legFront {
  right:13px;
}

.midPerson.left {
  color:#2563eb;
  transform:translateY(12px) rotate(18deg);
}

.midPerson.right {
  color:#f97316;
  transform:translateY(12px) rotate(-18deg);
}

.midPerson.left .armBack { transform:rotate(35deg); }
.midPerson.left .armFront { transform:rotate(-55deg); }
.midPerson.left .legBack { transform:rotate(24deg); }
.midPerson.left .legFront { transform:rotate(-18deg); }

.midPerson.right .armBack { transform:rotate(-35deg); }
.midPerson.right .armFront { transform:rotate(55deg); }
.midPerson.right .legBack { transform:rotate(-24deg); }
.midPerson.right .legFront { transform:rotate(18deg); }

.midPerson.is-pulling {
  animation:tugBody 0.45s ease-in-out infinite;
}

.midPerson.is-pulling .armBack,
.midPerson.is-pulling .armFront {
  animation:tugArm 0.45s ease-in-out infinite;
}

.midPerson.is-pulling .legBack,
.midPerson.is-pulling .legFront {
  animation:tugLeg 0.45s ease-in-out infinite;
}

.midPerson.winning {
  filter:drop-shadow(0 0 8px rgba(22,163,74,0.6));
}

@keyframes tugBody {
  0%,
  100% { transform:translateY(22px) translateX(0) rotate(var(--base-rot)); }
  50% { transform:translateY(20px) translateX(var(--tug-shift)) rotate(calc(var(--base-rot) + var(--tug-rot))); }
}

@keyframes tugArm {
  0%,
  100% { transform:rotate(var(--arm-start)); }
  50% { transform:rotate(var(--arm-end)); }
}

@keyframes tugLeg {
  0%,
  100% { transform:rotate(var(--leg-start)); }
  50% { transform:rotate(var(--leg-end)); }
}

.midPerson.left {
  --base-rot:11deg;
  --tug-rot:4deg;
  --tug-shift:-5px;
}

.midPerson.left .armBack,
.midPerson.left .armFront {
  --arm-start:35deg;
  --arm-end:-20deg;
}

.midPerson.left .armFront {
  --arm-start:-55deg;
  --arm-end:-95deg;
}

.midPerson.left .legBack,
.midPerson.left .legFront {
  --leg-start:24deg;
  --leg-end:-8deg;
}

.midPerson.left .legFront {
  --leg-start:-18deg;
  --leg-end:18deg;
}

.midPerson.right {
  --base-rot:-11deg;
  --tug-rot:-4deg;
  --tug-shift:5px;
}

.midPerson.right .armBack,
.midPerson.right .armFront {
  --arm-start:-35deg;
  --arm-end:20deg;
}

.midPerson.right .armFront {
  --arm-start:55deg;
  --arm-end:95deg;
}

.midPerson.right .legBack,
.midPerson.right .legFront {
  --leg-start:-24deg;
  --leg-end:8deg;
}

.midPerson.right .legFront {
  --leg-start:18deg;
  --leg-end:-18deg;
}


.pullers {
  position:absolute;
  inset:0;
  pointer-events:none;
}

.tugTeam {
  position:absolute;
  top:40px;
  display:flex;
  gap:var(--teamGap);
  align-items:center;
  transition:transform 0.25s ease, filter 0.2s ease;
  z-index:20;
}

.tugLeft {
  left:80px;
  transform:translateX(var(--gameX, 0px));
}

.tugRight {
  right:80px;
  transform:translateX(var(--gameX, 0px));
}

.team {
  transition:filter 0.2s ease;
}

.team.winning {
  filter:drop-shadow(0 0 8px rgba(22,163,74,0.5));
}


.tugPlayerWrap,
.player-wrap {
  width:max(80px, var(--playerSize));
  height:max(80px, var(--playerSize));
  z-index:20;
}

.tugPlayerSprite,
.player-sprite {
  width:max(80px, var(--playerSize));
  height:max(80px, var(--playerSize));
  display:block;
  opacity:1;
  visibility:visible;
  background-size:contain;
  background-repeat:no-repeat;
  background-position:center;
  filter:drop-shadow(0 4px 4px rgba(30, 41, 59, 0.22));
  transform-origin:50% 58%;
  transform:translateY(1px);
}

.teamScore.blue,
.panel.blue {
  color:#2563eb;
}

.teamScore.red,
.panel.red {
  color:#dc2626;
}

/* DEBUG (désactivable): décommentez pour visualiser les boîtes joueurs. */
/* .tugPlayer, .player, .tugPlayerSprite { outline: 2px solid red; } */

.tugBlue,
.player-blue {
  background-image:url("./joueurbleu.png");
}

.tugRed,
.player-red {
  background-image:url("./joueurrouge.png");
}

.team.is-pulling .tugPlayerSprite,
.team.is-pulling .player-sprite {
  animation:effortBounce 0.45s ease-in-out infinite;
}

@keyframes effortBounce {
  0%,
  100% { transform:translateY(0) rotate(-1deg); }
  50% { transform:translateY(2px) rotate(1deg); }
}

.team .tugPlayerWrap:nth-child(2) .tugPlayerSprite,
.team .player-wrap:nth-child(2) .player-sprite {
  animation-delay:0.12s;
}


.countdownOverlay {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  display:none;
  justify-content:center;
  align-items:center;
}

.countdownOverlay.show {
  display:flex;
}

.countdownText {
  font-size:100px;
  color:white;
  font-weight:900;
  animation:pop 0.7s;
}

@keyframes pop {
  0%{transform:scale(0.5);opacity:0;}
  50%{transform:scale(1.2);}
  100%{transform:scale(1);opacity:1;}
}

.winner {
  font-size:24px;
  font-weight:900;
  margin-top:20px;
}
